{"version":3,"file":"add-images-to-drupal-views-search-page-e4e4d293.js","sources":["../../src/pages/tutorials/add-images-to-drupal-views-search-page.md"],"sourcesContent":["---\ntitle: Add images to Drupal Views Search Page\npub:\n- 3\n- Mar\npublished: 2016-03-02T00:03:47+03:00\nmodified: 2016-03-02T00:03:47+03:00\nsummary: Drupal Views is a powerful tool for all kind of mixed results but how to add images to Views' Page when url have '?'. Blocks can't help you, but PHP can.\nlayout: tutorial\n---\n\nI had a problem how to print big hero images to custom made search page (<a href=\"https://www.drupal.org/project/views\" rel=\"noreferrer noopener\" target=\"_blank\">Drupal Views</a>) only for certain search results. <a href=\"https://www.drupal.org/\" rel=\"noreferrer noopener\" target=\"_blank\">Drupal</a>'s blocks do not understand urls with `?` so that option was out. The answer was very simple and my saviour was once again PHP. I added `Global: PHP` field to View's Header section.\n\nI use Drupal's term reference fields as features for Products (Drupal Commerce) and Brand is one of them. First, I wanted to know if the search page result is \"brand only\". Those images should be visible only when there is only one brand name selected and nothing else.\n\n```PHP\n<?php\nif(isset($_GET['field_brand_tid'])) {\n    if(count($_GET) == 2 AND count($_GET['field_brand_tid']) == 1){\n        $i = $_GET['field_brand_tid'][0];\n        $term = taxonomy_term_load($i);\n        $term = $term->name;\n        $term = strtolower($term);\n        $term = preg_replace('/\\s+/', '', $term);\n        echo \"<img src='/sites/all/themes/themename/brand/$term.jpg' alt=''/>\";\n    }\n}\n?>\n```\n\n`var_dump($_GET)` gives something like this:\n\n```PHP\narray(2) { [\"field_brand_tid\"]=> array(1) { [0]=> string(1) \"1\" } [\"q\"]=> string(4) \"search\" }\n```\n\nFirst, there has to be at least one brand selected, if none found then this code is not executed. Then I want to know how many $_GET results there are because there can be only two; one for search (q) and one for the brand. After that we can check out the ID and the name of the brand and fix the name for the file name. strtolower makes the name lowercase and preg_replace removes all spaces. Now everything is ready for printing.\n\nI really enjoyed this little challenge and big thanks for <a href=\"https://www.linkedin.com/in/joonaskolkka/\" rel=\"noopener\" target=\"_blank\">Joonas</a> from <a href=\"https://www.comspot.fi/\" rel=\"noopener\" target=\"_blank\">Comspot</a> for helping me out."],"names":["metadata","title","pub","published","modified","summary","layout"],"mappings":"+9FAS2BA,4LAAAA,yIARbA,GAAYC,MAAQ,yCAAyCC,KAAO,EAAE,OAAOC,UAAY,2BAA2BC,SAAW,2BAA2BC,QAAU,4JAA4JC,OAAS"}