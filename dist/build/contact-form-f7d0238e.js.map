{"version":3,"file":"contact-form-f7d0238e.js","sources":["../../src/pages/tutorials/contact-form.md"],"sourcesContent":["---\ntitle: How to create a simple contact form in HTML and PHP\npub:\n- 1\n- Jan\npublished: 2017-01-01T11:43:34+02:00\nmodified: 2017-01-01T11:43:34+02:00\nsummary: HTML Forms are one of the main points of interaction between a user and a web site. This tutorial teaches you how to make one.\nlayout: tutorial\n---\n\n**HTML Forms** are one of the main points of interaction between a user and a web site.\n\nI mostly use modules for <a href=\"https://www.drupal.org/\" rel=\"noopener\" target=\"_blank\">Drupal</a> when needed web forms, but sometimes clients need something special. Things that normal web forms can’t provide. This tutorial teaches how to create a simple web form, validate its data and send it as an HTML email. I also use email provided by the form as the sender's email so the client can press reply when contacting the customer. You can also save all data to MySQL / MariaDB database if needed.\n\nFirst, we need to create a form with basic text input fields and some radio box fields.\n\n```HTML\n<form method=\"post\" action=\"<?php echo htmlspecialchars($_SERVER[\"PHP_SELF\"]);?>\">\n<input placeholder=\"name\" type=\"text\" name=\"name\" maxlength=\"30\" autofocus required>\n<input placeholder=\"email\" type=\"text\" name=\"email\" maxlength=60 autocomplete=on required>\n<textarea name=comment rows=5 cols=40 value=message required></textarea>\n<ul>\n<li><input name=\"list2\" type=\"radio\" value=\"Value 1\" /></li>\n<li><input name=\"list2\" type=\"radio\" value=\"Value 2\" /></li>\n</ul>\n<input type=\"submit\" value=\"Send\" name=\"submit\">\n</form>\n```\n\nNotice that I used `<?php echo htmlspecialchars($_SERVER[\"PHP_SELF\"]);?>` instead of `#`. That's because the `htmlspecialchars()` function converts special characters to HTML entities. This prevents attackers from exploiting the code by injecting HTML or Javascript code (Cross-site Scripting attacks) in forms.\n\nThe name attribute is used to reference elements in PHP, or to reference form data after a form is submitted. The value attribute specifies the value that is sent to submit. The radio fields use the same name and those do not need foreach because only one selection can be active at a time.\n\nNow that we have a form ready to use, we need to make PHP code which fetches submitted data from the field, process it and send an HTML email to whoever is the recipient of the message.\n\n```PHP\n<?php\n// Things to happen after pressing Submit.\nif($_POST[\"submit\"]) {\n\n// Define variables and set to empty values.\n$list = $data = \"\";\n\n// Fetch and validate data from text fields\n$name = strip_tags($_POST['name']); // Sender’s name\n$email = strip_tags($_POST[\"email\"]); // Sender’s address\n$comment = strip_tags($_POST[\"comment\"]); // Message\n\n// Fetch data from radio button\n$list = $_POST[\"list2\"];\n\n$to = \"info@example.com\"; // Recipient of the message\n$subject = \"Message header\";\n$headers = \"From: \" . $email . \"\\r\\n\";\n$headers .= \"MIME-Version: 1.0\\r\\n\";\n$headers .= \"Content-Type: text/html; charset=UTF-8\\r\\n\";\n$message = \"<html><body>\";\n$message .= \"<p>$comment</p>\";\n$message .= $list;\n$message .= \"</body></html>\";\n\n// Send mail mail($to, $subject, $message, $headers); ?>\n<script type=\"text/javascript\">window.location = \"https://timoanttila.com/\";</script>\n<?php } ?>\n```\n\n## How to save all data from webform submissions to SQL database\n\nYou need to make a table with all rows you need to.\n\nPut similar code after mail(). If you want a more secure method then make sql.php and put it somewhere where it's not accessible from the Internet and call it `include('/somewhere/sql.php');`.\n\n```PHP\n<?php\n$servername = \"Server IP\";\n$username = \"Username\";\n$password = \"Password\";\n$dbname = \"Database\";\n$table = \"Table\";\n\n// Create connection\n$conn = new mysqli($servername, $username, $password, $dbname);\n// Check connection\nif ($conn->connect_error) die(\"Connection failed: \" . $conn->connect_error);\n$time = date(\"Y-m-d H:i\");\n$conn->query(\"INSERT INTO Form (Name, Email, Message, Up) VALUES ('$name', '$email', '$comment', '$time')\");\n$conn->close();\n?>\n```"],"names":["metadata","title","pub","published","modified","summary","layout"],"mappings":"spLAS2BA,4LAAAA,yIARbA,GAAYC,MAAQ,sDAAsDC,KAAO,EAAE,OAAOC,UAAY,2BAA2BC,SAAW,2BAA2BC,QAAU,iIAAiIC,OAAS"}